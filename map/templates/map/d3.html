{% extends 'abstractbase.html' %}
{% load static %}
{% block pageStyle %}
<link rel="stylesheet" href="{% static 'map/css/map.css' %}"/>
<script src="https://d3js.org/d3.v4.min.js"></script>
{% endblock pageStyle %}

{% block map %}
<div class="container">
  <div class="row">
    <div class="col">
      <div class="hello">
        Hello:
      </div>
      <ul id = "list">
         <li></li>
         <li></li>
      </ul>
    </div>
    <div class="col">
      <svg width="500" height="200" fill="yellow">
        <rect x = "100" y = "10" width = "300" height = "200" fill = "yellow"></rect>
        <line x1 = "100" y1 = "100" x2 = "200" y2 = "200"
         style = "stroke:rgb(155,0,0);stroke-width:2" />
      </svg>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <div class="svgcontainer"></div>
    </div>
  </div>
  <div class="row">
    <div id="my_dataviz"></div>
  </div>
</div>


{% endblock map %}

{% block pageSpecificJavascript %}
<script type="module">
  const message = d3.select("div.hello").html("Bye");
  d3.select("div.hello").classed("red", true)
  d3.select(".red").html("No red")

  d3.select("#list").selectAll("li")
    .data([10,20,30,40,50])
    .text(function(d) {return d})
    .enter()
    .append("li")
    .text(function(d) {return d})
    .attr("style", "color:red")

  var width = 300;
    var height = 300;
    //Create SVG element
    var svg = d3.select(".svgcontainer")
      .append("svg")
      .attr("width", width)
      .attr("height", height);
    //Append circle
    svg.append("circle")
      .attr("cx", 200)
      .attr("cy", 50)
      .attr("r", 20)
      .attr("fill", "green");
    svg.append("rect")
      .attr("x", 20)
      .attr("y", 20)
      .attr("width", 100)
      .attr("height", 100)
      .attr("fill", "yellow");

  var newsvg = d3.select("#my_dataviz")
      .append("svg")
        .attr("width", 400)
        .attr("height", 400)

    // Append a circle
    newsvg.append("circle")
      .attr("id", "circleBasicTooltip")
      .attr("cx", 150)
      .attr("cy", 200)
      .attr("r", 40)
      .attr("fill", "#69b3a2")

    // create a tooltip
    var tooltip = d3.select("#my_dataviz")
      .append("div")
        .style("position", "absolute")
        .style("visibility", "hidden")
        .text("I'm a circle!");

    //
    d3.select("#circleBasicTooltip")
      .on("mouseover", function(){return tooltip.style("visibility", "visible");})
      .on("mousemove", function(){return tooltip.style("top", (event.pageY-800)+"px").style("left",(event.pageX-800)+"px");})
      .on("mouseout", function(){return tooltip.style("visibility", "hidden");});

</script>
{% endblock pageSpecificJavascript %}
